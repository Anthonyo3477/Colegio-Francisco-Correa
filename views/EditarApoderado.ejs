<!DOCTYPE html>
<html lang="es">

<head>
    <title>Editar Apoderado</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/actualizarApoderados.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>

<body>
    <!-- Navbar -->
    <%- include('partials/navbar') %>

        <main class="container my-5">
            <h2 class="text-center mb-4">Editar Apoderado</h2>
            <% if (error) { %>
                <div class="alert alert-danger text-center">
                    <%= error %>
                </div>
                <% } %>
                    <div class="card shadow-sm p-4">
                        <form action="/actualizar-apoderado/<%= apoderado.alumno_id %>" method="POST">
                            <!-- Mantener relación con el alumno --> 
                            <input type="hidden" name="alumno_id" value="<%= apoderado.alumno_id %>">
                            <!-- --------------------------------- APODERADO PRINCIPAL --------------------------------- -->
                            <h4 class="mt-3">Datos Apoderado Principal</h4>
                            <div class="row g-3">

                                <div class="col-md-6">
                                    <label class="form-label">Nombre Completo:</label>
                                    <input type="text" class="form-control" name="nombre_apoderado"value="<%= apoderado.nombre_apoderado || '' %>" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">RUT del Apoderado:</label>
                                    <input type="text" class="form-control" name="rut_apoderado" value="<%= apoderado.rut_apoderado || '' %>" readonly>
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Parentesco con el Alumno:</label>
                                    <input type="text" class="form-control" name="parentesco_apoderado" value="<%= apoderado.parentesco_apoderado || '' %>" required>
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Fecha de Nacimiento:</label>
                                    <input type="date" class="form-control" name="fechaNacimiento_apoderado" value="<%= apoderado.fechaNacimiento_apoderado ? new Date(apoderado.fechaNacimiento_apoderado).toISOString().split('T')[0]: '' %>">
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Teléfono:</label>
                                    <input type="text" class="form-control" name="telefono" value="<%= apoderado.telefono || '' %>" required>
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Correo Electrónico:</label>
                                    <input type="email" class="form-control" name="correo_apoderado" value="<%= apoderado.correo_apoderado || '' %>" required>
                                </div>


                                <div class="col-md-6">
                                    <label class="form-label">Trabajo o Actividad:</label>
                                    <input type="text" class="form-control" name="trabajo_apoderado" value="<%= apoderado.trabajo_apoderado || '' %>">
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Nivel Educacional:</label>
                                    <input type="text" class="form-control" name="nivelEducacional_apoderado" value="<%= apoderado.nivelEducacional_apoderado || '' %>">
                                </div>

                            </div>
                            <!-- --------------------------------- APODERADO SUPLENTE --------------------------------- -->
                            <h4 class="mt-4">Datos Apoderado Suplente</h4>
                            <div class="row g-3">
                                <div class="col-md-6"> 
                                    <label class="form-label">Nombre:</label> 
                                    <input type="text"class="form-control" name="nombreApoderado_suplente"value="<%= apoderado_suplente.nombreApoderado_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Parentesco:</label> 
                                    <input type="text" class="form-control" name="parentescoApoderado_suplente" value="<%= apoderado_suplente.parentescoApoderado_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">RUT:</label> 
                                    <input type="text"class="form-control" name="rut_apoderado_suplente"value="<%= apoderado_suplente.rut_apoderado_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Fecha de Nacimiento:</label> 
                                    <input type="date" class="form-control" name="fechaNacimiento_apoderado_suplente" value="<%= apoderado_suplente.fechaNacimiento_apoderado_suplente ? new Date(apoderado_suplente.fechaNacimiento_apoderado_suplente).toISOString().split('T')[0] : '' %>">
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Teléfono:</label> 
                                    <input type="text" class="form-control" name="telefono_suplente"value="<%= apoderado_suplente.telefono_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Correo:</label> 
                                    <input type="email" class="form-control" name="correoApoderado_suplente" value="<%= apoderado_suplente.correoApoderado_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Trabajo:</label> 
                                    <input type="text" class="form-control" name="trabajoApoderado_suplente" value="<%= apoderado_suplente.trabajoApoderado_suplente || '' %>"> 
                                </div>

                                <div class="col-md-6"> 
                                    <label class="form-label">Nivel Educacional:</label> 
                                    <input type="text" class="form-control" name="nivelEducacional_apoderado_suplente" value="<%= apoderado_suplente.nivelEducacional_apoderado_suplente || '' %>">
                                </div>
                            </div> 
                            <!-- --------------------------------- PERSONA AUTORIZADA PARA RETIRO --------------------------------- -->
                            <h4 class="mt-4">Persona Autorizada para Retiro</h4>
                            <div class="row g-3">
                                <div class="col-md-6"> 
                                    <label class="form-label">Nombre:</label>
                                    <input type="text" class="form-control" name="nombre_retiro" value="<%= retiro.nombre_retiro || '' %>">
                                </div>
                                <div class="col-md-6"> 
                                    <label class="form-label">RUT:</label>
                                    <input type="text" class="form-control" name="rut_retiro" value="<%= retiro.rut_retiro || '' %>">
                                </div>
                                <div class="col-md-6"> 
                                    <label class="form-label">Parentesco:</label>
                                    <input type="text" class="form-control" name="parentesco_retiro" value="<%= retiro.parentesco_retiro || '' %>">
                                </div>
                            </div>
                            <!-- Botones -->
                            <div class="col-12 mt-4 d-flex justify-content-between"> <button type="submit"
                                    class="btn btn-warning"> <i class="bi bi-pencil-fill me-1"></i>Actualizar </button>
                                <a href="/listaAlumnos" class="btn btn-secondary"> 
                                    <i class="bi bi-arrow-left-circle me-1"></i>Cancelar </a>
                            </div>
                        </form>
                    </div>
        </main>

        <%- include('partials/footer') %>

            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>